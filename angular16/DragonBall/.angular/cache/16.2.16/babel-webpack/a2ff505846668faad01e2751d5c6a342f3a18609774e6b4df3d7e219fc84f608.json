{"ast":null,"code":"import { signal } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./persiste-api-local.service\";\nexport class SenalMisPersonajesService {\n  constructor(persisteApiLocal) {\n    this.persisteApiLocal = persisteApiLocal;\n    this.listadoMisPersonajes = signal([]);\n    this.editaMiPersonaje = signal(undefined);\n  }\n  verificarYCrearTabla() {\n    this.persisteApiLocal.verificarYCrearTabla().subscribe({\n      next: response => {\n        console.log('Tabla verificada/creada:', response);\n        this.leerMisPersonajes();\n      },\n      error: error => {\n        console.error('Error al verificar/crear la tabla:', error);\n      }\n    });\n  }\n  leerMisPersonajes() {\n    this.persisteApiLocal.leerMisPersonajes().subscribe({\n      next: personajes => {\n        this.listadoMisPersonajes.set(personajes);\n      },\n      error: error => {\n        console.error('Error al leer los personajes:', error);\n      }\n    });\n  }\n  agregarMiPersonaje(miPersonaje) {\n    this.persisteApiLocal.grabarMiPersonaje(miPersonaje).subscribe({\n      next: response => {\n        console.log('Personaje agregado:', response);\n        this.leerMisPersonajes();\n      },\n      error: error => {\n        console.error('Error al agregar el personaje:', error);\n      }\n    });\n    this.editaMiPersonaje.set(undefined);\n  }\n  eliminarMiPersonaje(indice) {\n    this.persisteApiLocal.borrarMiPersonaje(indice).subscribe({\n      next: response => {\n        console.log('Personaje borrado:', response);\n        this.leerMisPersonajes();\n      },\n      error: error => {\n        console.error('Error al borrar el personaje:', error);\n      }\n    });\n  }\n  editarMiPersonaje(miPersonaje) {\n    this.editaMiPersonaje.set({\n      ...miPersonaje\n    });\n  }\n  static {\n    this.ɵfac = function SenalMisPersonajesService_Factory(t) {\n      return new (t || SenalMisPersonajesService)(i0.ɵɵinject(i1.PersisteApiLocalService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: SenalMisPersonajesService,\n      factory: SenalMisPersonajesService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["signal","SenalMisPersonajesService","constructor","persisteApiLocal","listadoMisPersonajes","editaMiPersonaje","undefined","verificarYCrearTabla","subscribe","next","response","console","log","leerMisPersonajes","error","personajes","set","agregarMiPersonaje","miPersonaje","grabarMiPersonaje","eliminarMiPersonaje","indice","borrarMiPersonaje","editarMiPersonaje","i0","ɵɵinject","i1","PersisteApiLocalService","factory","ɵfac","providedIn"],"sources":["/usr/src/app/010-Plantilla/010d-Plantilla-TODO/src/app/ejercicios/ejercicio01/servicios/senalMisPersonajes.service.ts"],"sourcesContent":["import { Injectable, signal } from '@angular/core';\nimport { MiPersonaje } from '../cruds/MisPersonajes/interfaces/miPersonaje';\nimport { PersisteApiLocalService } from './persiste-api-local.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SenalMisPersonajesService {\n  public listadoMisPersonajes = signal<MiPersonaje[]>([]);\n\n  constructor(private persisteApiLocal: PersisteApiLocalService) { }\n\n  verificarYCrearTabla() {\n    this.persisteApiLocal.verificarYCrearTabla()\n      .subscribe({\n        next: (response) => {\n          console.log('Tabla verificada/creada:', response);\n          this.leerMisPersonajes();\n        },\n        error: (error) => {\n          console.error('Error al verificar/crear la tabla:', error);\n        }\n      });\n  }\n\n  leerMisPersonajes() {\n    this.persisteApiLocal.leerMisPersonajes()\n      .subscribe({\n        next: (personajes: MiPersonaje[]) => {\n          this.listadoMisPersonajes.set(personajes);\n        },\n        error: (error) => {\n          console.error('Error al leer los personajes:', error);\n        }\n      });\n  }\n\n  agregarMiPersonaje(miPersonaje: MiPersonaje) {\n    this.persisteApiLocal.grabarMiPersonaje(miPersonaje)\n      .subscribe({\n        next: (response) => {\n          console.log('Personaje agregado:', response);\n          this.leerMisPersonajes();\n        },\n        error: (error) => {\n          console.error('Error al agregar el personaje:', error);\n        }\n      });\n    this.editaMiPersonaje.set(undefined);\n  }\n\n  eliminarMiPersonaje(indice: number) {\n    this.persisteApiLocal.borrarMiPersonaje(indice)\n      .subscribe({\n        next: (response) => {\n          console.log('Personaje borrado:', response);\n          this.leerMisPersonajes();\n        },\n        error: (error) => {\n          console.error('Error al borrar el personaje:', error);\n        }\n      });\n  }\n\n  public editaMiPersonaje = signal<MiPersonaje | undefined>(undefined);\n  editarMiPersonaje(miPersonaje: MiPersonaje) {\n    this.editaMiPersonaje.set({ ...miPersonaje });\n  }\n}\n"],"mappings":"AAAA,SAAqBA,MAAM,QAAQ,eAAe;;;AAOlD,OAAM,MAAOC,yBAAyB;EAGpCC,YAAoBC,gBAAyC;IAAzC,KAAAA,gBAAgB,GAAhBA,gBAAgB;IAF7B,KAAAC,oBAAoB,GAAGJ,MAAM,CAAgB,EAAE,CAAC;IAwDhD,KAAAK,gBAAgB,GAAGL,MAAM,CAA0BM,SAAS,CAAC;EAtDH;EAEjEC,oBAAoBA,CAAA;IAClB,IAAI,CAACJ,gBAAgB,CAACI,oBAAoB,EAAE,CACzCC,SAAS,CAAC;MACTC,IAAI,EAAGC,QAAQ,IAAI;QACjBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEF,QAAQ,CAAC;QACjD,IAAI,CAACG,iBAAiB,EAAE;MAC1B,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACfH,OAAO,CAACG,KAAK,CAAC,oCAAoC,EAAEA,KAAK,CAAC;MAC5D;KACD,CAAC;EACN;EAEAD,iBAAiBA,CAAA;IACf,IAAI,CAACV,gBAAgB,CAACU,iBAAiB,EAAE,CACtCL,SAAS,CAAC;MACTC,IAAI,EAAGM,UAAyB,IAAI;QAClC,IAAI,CAACX,oBAAoB,CAACY,GAAG,CAACD,UAAU,CAAC;MAC3C,CAAC;MACDD,KAAK,EAAGA,KAAK,IAAI;QACfH,OAAO,CAACG,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACvD;KACD,CAAC;EACN;EAEAG,kBAAkBA,CAACC,WAAwB;IACzC,IAAI,CAACf,gBAAgB,CAACgB,iBAAiB,CAACD,WAAW,CAAC,CACjDV,SAAS,CAAC;MACTC,IAAI,EAAGC,QAAQ,IAAI;QACjBC,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEF,QAAQ,CAAC;QAC5C,IAAI,CAACG,iBAAiB,EAAE;MAC1B,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACfH,OAAO,CAACG,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAAC;MACxD;KACD,CAAC;IACJ,IAAI,CAACT,gBAAgB,CAACW,GAAG,CAACV,SAAS,CAAC;EACtC;EAEAc,mBAAmBA,CAACC,MAAc;IAChC,IAAI,CAAClB,gBAAgB,CAACmB,iBAAiB,CAACD,MAAM,CAAC,CAC5Cb,SAAS,CAAC;MACTC,IAAI,EAAGC,QAAQ,IAAI;QACjBC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEF,QAAQ,CAAC;QAC3C,IAAI,CAACG,iBAAiB,EAAE;MAC1B,CAAC;MACDC,KAAK,EAAGA,KAAK,IAAI;QACfH,OAAO,CAACG,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACvD;KACD,CAAC;EACN;EAGAS,iBAAiBA,CAACL,WAAwB;IACxC,IAAI,CAACb,gBAAgB,CAACW,GAAG,CAAC;MAAE,GAAGE;IAAW,CAAE,CAAC;EAC/C;;;uBA5DWjB,yBAAyB,EAAAuB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,uBAAA;IAAA;EAAA;;;aAAzB1B,yBAAyB;MAAA2B,OAAA,EAAzB3B,yBAAyB,CAAA4B,IAAA;MAAAC,UAAA,EAFxB;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}