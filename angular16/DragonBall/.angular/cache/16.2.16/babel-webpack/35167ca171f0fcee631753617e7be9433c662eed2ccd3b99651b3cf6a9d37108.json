{"ast":null,"code":"import { signal } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./acceso-api.service\";\nimport * as i2 from \"@angular/router\";\nexport class AuthService {\n  constructor(accesoApi, router) {\n    this.accesoApi = accesoApi;\n    this.router = router;\n    this._isLoggedIn = signal(false);\n    this.isLoggedIn = this._isLoggedIn.asReadonly();\n    this._usuario = signal(null);\n    this.usuario = this._usuario.asReadonly();\n  }\n  // ðŸ” LOGIN\n  login(username, password) {\n    this.accesoApi.login(username, password).subscribe({\n      next: resp => {\n        if (resp.ok) {\n          this._isLoggedIn.set(true);\n          this._usuario.set(resp.usuario);\n          this.router.navigate(['/inicio']);\n        } else {\n          this._isLoggedIn.set(false);\n          this.router.navigate(['/registro']);\n        }\n      },\n      error: () => {\n        this._isLoggedIn.set(false);\n        this._usuario.set(null);\n      }\n    });\n  }\n  // ðŸ“ REGISTRO\n  registro(nombre, username, password) {\n    this.accesoApi.registro(nombre, username, password).subscribe({\n      next: resp => {\n        if (resp.ok) {\n          this.router.navigate(['/login']);\n        }\n      }\n    });\n  }\n  // ðŸšª LOGOUT\n  logout() {\n    this._isLoggedIn.set(false);\n    this._usuario.set(null);\n    this.router.navigate(['/login']);\n  }\n  static {\n    this.Éµfac = function AuthService_Factory(t) {\n      return new (t || AuthService)(i0.ÉµÉµinject(i1.AccesoApiService), i0.ÉµÉµinject(i2.Router));\n    };\n  }\n  static {\n    this.Éµprov = /*@__PURE__*/i0.ÉµÉµdefineInjectable({\n      token: AuthService,\n      factory: AuthService.Éµfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["signal","AuthService","constructor","accesoApi","router","_isLoggedIn","isLoggedIn","asReadonly","_usuario","usuario","login","username","password","subscribe","next","resp","ok","set","navigate","error","registro","nombre","logout","i0","ÉµÉµinject","i1","AccesoApiService","i2","Router","factory","Éµfac","providedIn"],"sources":["/usr/src/app/010-Plantilla/010d-Plantilla-TODO/src/app/servicios/auth.service.ts"],"sourcesContent":["import { Injectable, signal } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AccesoApiService } from './acceso-api.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n\n  private _isLoggedIn = signal(false);\n  isLoggedIn = this._isLoggedIn.asReadonly();\n\n  public _usuario = signal<any | null>(null);\n  usuario = this._usuario.asReadonly();\n\n  constructor(\n    private accesoApi: AccesoApiService,\n    private router: Router\n  ) {}\n\n  // ðŸ” LOGIN\n  login(username: string, password: string): void {\n    this.accesoApi.login(username, password)\n      .subscribe({\n        next: (resp) => {\n          if (resp.ok) {\n            this._isLoggedIn.set(true);\n            this._usuario.set(resp.usuario);\n            this.router.navigate(['/inicio']);\n          } else {\n            this._isLoggedIn.set(false);\n            this.router.navigate(['/registro']);\n          }\n        },\n        error: () => {\n          this._isLoggedIn.set(false);\n          this._usuario.set(null);\n        }\n      });\n  }\n\n  // ðŸ“ REGISTRO\n  registro(nombre: string, username: string, password: string): void {\n    this.accesoApi.registro(nombre, username, password)\n      .subscribe({\n        next: (resp) => {\n          if (resp.ok) {\n            this.router.navigate(['/login']);\n          }\n        }\n      });\n  }\n\n  // ðŸšª LOGOUT\n  logout(): void {\n    this._isLoggedIn.set(false);\n    this._usuario.set(null);\n    this.router.navigate(['/login']);\n  }\n}\n"],"mappings":"AAAA,SAAqBA,MAAM,QAAQ,eAAe;;;;AAOlD,OAAM,MAAOC,WAAW;EAQtBC,YACUC,SAA2B,EAC3BC,MAAc;IADd,KAAAD,SAAS,GAATA,SAAS;IACT,KAAAC,MAAM,GAANA,MAAM;IARR,KAAAC,WAAW,GAAGL,MAAM,CAAC,KAAK,CAAC;IACnC,KAAAM,UAAU,GAAG,IAAI,CAACD,WAAW,CAACE,UAAU,EAAE;IAEnC,KAAAC,QAAQ,GAAGR,MAAM,CAAa,IAAI,CAAC;IAC1C,KAAAS,OAAO,GAAG,IAAI,CAACD,QAAQ,CAACD,UAAU,EAAE;EAKjC;EAEH;EACAG,KAAKA,CAACC,QAAgB,EAAEC,QAAgB;IACtC,IAAI,CAACT,SAAS,CAACO,KAAK,CAACC,QAAQ,EAAEC,QAAQ,CAAC,CACrCC,SAAS,CAAC;MACTC,IAAI,EAAGC,IAAI,IAAI;QACb,IAAIA,IAAI,CAACC,EAAE,EAAE;UACX,IAAI,CAACX,WAAW,CAACY,GAAG,CAAC,IAAI,CAAC;UAC1B,IAAI,CAACT,QAAQ,CAACS,GAAG,CAACF,IAAI,CAACN,OAAO,CAAC;UAC/B,IAAI,CAACL,MAAM,CAACc,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;SAClC,MAAM;UACL,IAAI,CAACb,WAAW,CAACY,GAAG,CAAC,KAAK,CAAC;UAC3B,IAAI,CAACb,MAAM,CAACc,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;;MAEvC,CAAC;MACDC,KAAK,EAAEA,CAAA,KAAK;QACV,IAAI,CAACd,WAAW,CAACY,GAAG,CAAC,KAAK,CAAC;QAC3B,IAAI,CAACT,QAAQ,CAACS,GAAG,CAAC,IAAI,CAAC;MACzB;KACD,CAAC;EACN;EAEA;EACAG,QAAQA,CAACC,MAAc,EAAEV,QAAgB,EAAEC,QAAgB;IACzD,IAAI,CAACT,SAAS,CAACiB,QAAQ,CAACC,MAAM,EAAEV,QAAQ,EAAEC,QAAQ,CAAC,CAChDC,SAAS,CAAC;MACTC,IAAI,EAAGC,IAAI,IAAI;QACb,IAAIA,IAAI,CAACC,EAAE,EAAE;UACX,IAAI,CAACZ,MAAM,CAACc,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;;MAEpC;KACD,CAAC;EACN;EAEA;EACAI,MAAMA,CAAA;IACJ,IAAI,CAACjB,WAAW,CAACY,GAAG,CAAC,KAAK,CAAC;IAC3B,IAAI,CAACT,QAAQ,CAACS,GAAG,CAAC,IAAI,CAAC;IACvB,IAAI,CAACb,MAAM,CAACc,QAAQ,CAAC,CAAC,QAAQ,CAAC,CAAC;EAClC;;;uBAnDWjB,WAAW,EAAAsB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,gBAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,MAAA;IAAA;EAAA;;;aAAX3B,WAAW;MAAA4B,OAAA,EAAX5B,WAAW,CAAA6B,IAAA;MAAAC,UAAA,EAFV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}