{"ast":null,"code":"import { signal } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./dragon-ball-api.service\";\nimport * as i2 from \"./senalMisPersonajes.service\";\nexport class SenalBuscaTFormaApiWebService {\n  constructor(conexionApiWeb, senalMisPersonajes) {\n    this.conexionApiWeb = conexionApiWeb;\n    this.senalMisPersonajes = senalMisPersonajes;\n    this.listadoTransformaciones = signal([]);\n    this.editaTransformacion = signal(undefined);\n  }\n  buscarTransformaciones(nombre) {\n    this.conexionApiWeb.getPersonajePorNombre(nombre).subscribe(personaje => {\n      if (!personaje || personaje.length === 0) {\n        console.log('No se encontraron personajes con el nombre:', nombre);\n        return;\n      }\n      const id = personaje[0].id;\n      this.conexionApiWeb.getPersonajePorId(id).subscribe(personaje => {\n        // Asegurarnos de que las transformaciones estén presentes\n        const transformaciones = personaje.transformations || [];\n        // Crear el array combinado con el personaje primero y luego las transformaciones\n        const resultado = [{\n          id: personaje.id,\n          name: personaje.name,\n          ki: personaje.ki,\n          image: personaje.image\n        }, ...transformaciones // Spread operator para agregar las transformaciones al array\n        ];\n        // Almacenar el resultado en listadoTransformaciones\n        this.listadoTransformaciones.set(resultado); // Almacenamos el array combinado\n      });\n    });\n  }\n\n  eliminarTForma(indice) {\n    const copia = [...this.listadoTransformaciones()];\n    copia.splice(indice, 1);\n    this.listadoTransformaciones.set(copia);\n  }\n  editarTForma(transformacion) {\n    const editaMiPersonaje = {\n      name: transformacion.name,\n      ki: transformacion.ki\n    };\n    this.senalMisPersonajes.editaMiPersonaje.set({\n      ...editaMiPersonaje\n    });\n  }\n  static {\n    this.ɵfac = function SenalBuscaTFormaApiWebService_Factory(t) {\n      return new (t || SenalBuscaTFormaApiWebService)(i0.ɵɵinject(i1.DragonBallApiService), i0.ɵɵinject(i2.SenalMisPersonajesService));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: SenalBuscaTFormaApiWebService,\n      factory: SenalBuscaTFormaApiWebService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["signal","SenalBuscaTFormaApiWebService","constructor","conexionApiWeb","senalMisPersonajes","listadoTransformaciones","editaTransformacion","undefined","buscarTransformaciones","nombre","getPersonajePorNombre","subscribe","personaje","length","console","log","id","getPersonajePorId","transformaciones","transformations","resultado","name","ki","image","set","eliminarTForma","indice","copia","splice","editarTForma","transformacion","editaMiPersonaje","i0","ɵɵinject","i1","DragonBallApiService","i2","SenalMisPersonajesService","factory","ɵfac","providedIn"],"sources":["/usr/src/app/010-Plantilla/010d-Plantilla-TODO/src/app/ejercicios/ejercicio01/servicios/senal-busca-tforma-api-web.service.ts"],"sourcesContent":["import { Injectable, signal } from '@angular/core';\nimport { DragonBallApiService } from './dragon-ball-api.service';\nimport { SenalMisPersonajesService } from './senalMisPersonajes.service';\nimport { TransformacionAPI } from '../cruds/Transformaciones/interfaces/transformacion-api';\nimport { MiPersonaje } from '../cruds/MisPersonajes/interfaces/miPersonaje';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SenalBuscaTFormaApiWebService {\n  public listadoTransformaciones = signal<TransformacionAPI[]>([]);\n  constructor(\n    private conexionApiWeb: DragonBallApiService,\n    private senalMisPersonajes: SenalMisPersonajesService,\n  ) { }\n\n  buscarTransformaciones(nombre: string) { // httpClient, devuelve observable\n    this.conexionApiWeb.getPersonajePorNombre(nombre)\n      .subscribe(personaje => {\n        if (!personaje || personaje.length === 0) {\n          console.log('No se encontraron personajes con el nombre:', nombre);\n          return;\n        }\n        const id = personaje[0].id;\n\n        this.conexionApiWeb.getPersonajePorId(id)\n          .subscribe(personaje => {\n            // Asegurarnos de que las transformaciones estén presentes\n            const transformaciones = personaje.transformations || [];\n\n            // Crear el array combinado con el personaje primero y luego las transformaciones\n            const resultado: TransformacionAPI[] = [\n              {\n                id: personaje.id,\n                name: personaje.name,\n                ki: personaje.ki,\n                image: personaje.image\n              },\n              ...transformaciones  // Spread operator para agregar las transformaciones al array\n            ];\n\n            // Almacenar el resultado en listadoTransformaciones\n            this.listadoTransformaciones.set(resultado);  // Almacenamos el array combinado\n          });\n      });\n  }\n\n  eliminarTForma(indice: number) {\n    const copia = [...this.listadoTransformaciones()];\n    copia.splice(indice, 1);\n    this.listadoTransformaciones.set(copia);\n  }\n\n  public editaTransformacion = signal<string | undefined>(undefined);\n  editarTForma(transformacion: TransformacionAPI) {\n    const editaMiPersonaje: MiPersonaje = {\n      name: transformacion.name,\n      ki: transformacion.ki\n    };\n    this.senalMisPersonajes.editaMiPersonaje.set({ ...editaMiPersonaje });\n  }\n}\n"],"mappings":"AAAA,SAAqBA,MAAM,QAAQ,eAAe;;;;AASlD,OAAM,MAAOC,6BAA6B;EAExCC,YACUC,cAAoC,EACpCC,kBAA6C;IAD7C,KAAAD,cAAc,GAAdA,cAAc;IACd,KAAAC,kBAAkB,GAAlBA,kBAAkB;IAHrB,KAAAC,uBAAuB,GAAGL,MAAM,CAAsB,EAAE,CAAC;IA2CzD,KAAAM,mBAAmB,GAAGN,MAAM,CAAqBO,SAAS,CAAC;EAvC9D;EAEJC,sBAAsBA,CAACC,MAAc;IACnC,IAAI,CAACN,cAAc,CAACO,qBAAqB,CAACD,MAAM,CAAC,CAC9CE,SAAS,CAACC,SAAS,IAAG;MACrB,IAAI,CAACA,SAAS,IAAIA,SAAS,CAACC,MAAM,KAAK,CAAC,EAAE;QACxCC,OAAO,CAACC,GAAG,CAAC,6CAA6C,EAAEN,MAAM,CAAC;QAClE;;MAEF,MAAMO,EAAE,GAAGJ,SAAS,CAAC,CAAC,CAAC,CAACI,EAAE;MAE1B,IAAI,CAACb,cAAc,CAACc,iBAAiB,CAACD,EAAE,CAAC,CACtCL,SAAS,CAACC,SAAS,IAAG;QACrB;QACA,MAAMM,gBAAgB,GAAGN,SAAS,CAACO,eAAe,IAAI,EAAE;QAExD;QACA,MAAMC,SAAS,GAAwB,CACrC;UACEJ,EAAE,EAAEJ,SAAS,CAACI,EAAE;UAChBK,IAAI,EAAET,SAAS,CAACS,IAAI;UACpBC,EAAE,EAAEV,SAAS,CAACU,EAAE;UAChBC,KAAK,EAAEX,SAAS,CAACW;SAClB,EACD,GAAGL,gBAAgB,CAAE;QAAA,CACtB;QAED;QACA,IAAI,CAACb,uBAAuB,CAACmB,GAAG,CAACJ,SAAS,CAAC,CAAC,CAAE;MAChD,CAAC,CAAC;IACN,CAAC,CAAC;EACN;;EAEAK,cAAcA,CAACC,MAAc;IAC3B,MAAMC,KAAK,GAAG,CAAC,GAAG,IAAI,CAACtB,uBAAuB,EAAE,CAAC;IACjDsB,KAAK,CAACC,MAAM,CAACF,MAAM,EAAE,CAAC,CAAC;IACvB,IAAI,CAACrB,uBAAuB,CAACmB,GAAG,CAACG,KAAK,CAAC;EACzC;EAGAE,YAAYA,CAACC,cAAiC;IAC5C,MAAMC,gBAAgB,GAAgB;MACpCV,IAAI,EAAES,cAAc,CAACT,IAAI;MACzBC,EAAE,EAAEQ,cAAc,CAACR;KACpB;IACD,IAAI,CAAClB,kBAAkB,CAAC2B,gBAAgB,CAACP,GAAG,CAAC;MAAE,GAAGO;IAAgB,CAAE,CAAC;EACvE;;;uBAnDW9B,6BAA6B,EAAA+B,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,oBAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,yBAAA;IAAA;EAAA;;;aAA7BpC,6BAA6B;MAAAqC,OAAA,EAA7BrC,6BAA6B,CAAAsC,IAAA;MAAAC,UAAA,EAF5B;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}