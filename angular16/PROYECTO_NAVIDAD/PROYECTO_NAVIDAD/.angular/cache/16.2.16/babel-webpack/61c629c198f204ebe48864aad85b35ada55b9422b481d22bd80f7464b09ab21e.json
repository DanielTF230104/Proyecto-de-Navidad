{"ast":null,"code":"import { signal } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicios/usuarios.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../listado-usuarios/listado-usuarios.component\";\nimport * as i4 from \"../formulario-usuario/formulario-usuario.component\";\nexport class UsuariosPrincipalComponent {\n  constructor(usuariosService) {\n    this.usuariosService = usuariosService;\n    // Usamos el signal del servicio para que la tabla sea reactiva\n    this.listadoUsuarios = this.usuariosService.listadoUsuarios;\n    // Signal que controla qu√© usuario se muestra en el formulario (hijo)\n    // Lo inicializamos con un objeto vac√≠o para que el formulario permita \"Crear\" al cargar\n    this.usuarioAEditar = signal(this.nuevoUsuarioVacio());\n  }\n  ngOnInit() {\n    this.usuariosService.leerUsuarios();\n  }\n  // Funci√≥n auxiliar para resetear el formulario a modo \"Crear\"\n  nuevoUsuarioVacio() {\n    return {\n      nombre: '',\n      username: '',\n      password: '',\n      rol: 'usuario',\n      imagen: ''\n    };\n  }\n  // Se ejecuta cuando el formulario hijo emite el evento de \"Guardar\" o \"Actualizar\"\n  recibirUsuarioDeHijo(usuario) {\n    this.usuariosService.actualizarUsuario(usuario);\n    // IMPORTANTE: Despu√©s de enviar, reseteamos a un objeto vac√≠o \n    // para que el formulario quede listo para crear otro\n    this.usuarioAEditar.set(this.nuevoUsuarioVacio());\n  }\n  // Se ejecuta al pulsar \"Editar\" en la tabla\n  editarUsuarioDeHijo(usuario) {\n    // Pasamos una copia del usuario con su ID para que el servidor haga UPDATE\n    this.usuarioAEditar.set({\n      ...usuario\n    });\n  }\n  eliminarUsuarioDeHijo(id) {\n    if (confirm('¬øEst√°s seguro de que quieres eliminar este usuario?')) {\n      this.usuariosService.eliminarUsuario(id);\n    }\n  }\n  // Nueva funci√≥n opcional por si quieres un bot√≥n de \"Cancelar edici√≥n\" o \"Limpiar\"\n  limpiarFormulario() {\n    this.usuarioAEditar.set(this.nuevoUsuarioVacio());\n  }\n  static {\n    this.…µfac = function UsuariosPrincipalComponent_Factory(t) {\n      return new (t || UsuariosPrincipalComponent)(i0.…µ…µdirectiveInject(i1.UsuariosService));\n    };\n  }\n  static {\n    this.…µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n      type: UsuariosPrincipalComponent,\n      selectors: [[\"app-usuarios-principal\"]],\n      decls: 12,\n      vars: 2,\n      consts: [[1, \"container-fluid\", \"py-3\", \"px-4\"], [\"routerLink\", \"/inicio\", 1, \"btn\", \"btn-outline-secondary\", \"btn-sm\"], [1, \"bi\", \"bi-arrow-left\"], [1, \"row\"], [1, \"col-md-4\"], [3, \"usuarioAEditar\", \"enviarUsuario\"], [1, \"col-md-8\"], [3, \"usuarios\", \"eliminar\", \"editar\"]],\n      template: function UsuariosPrincipalComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.…µ…µelementStart(0, \"div\", 0)(1, \"h4\");\n          i0.…µ…µtext(2, \"\\uD83D\\uDEE1\\uFE0F Gesti\\u00F3n de Usuarios (Admin)\");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelementStart(3, \"button\", 1);\n          i0.…µ…µelement(4, \"i\", 2);\n          i0.…µ…µtext(5, \" Volver al Inicio \");\n          i0.…µ…µelementEnd();\n          i0.…µ…µelement(6, \"hr\");\n          i0.…µ…µelementStart(7, \"div\", 3)(8, \"div\", 4)(9, \"app-formulario-usuario\", 5);\n          i0.…µ…µlistener(\"enviarUsuario\", function UsuariosPrincipalComponent_Template_app_formulario_usuario_enviarUsuario_9_listener($event) {\n            return ctx.recibirUsuarioDeHijo($event);\n          });\n          i0.…µ…µelementEnd()();\n          i0.…µ…µelementStart(10, \"div\", 6)(11, \"app-listado-usuarios\", 7);\n          i0.…µ…µlistener(\"eliminar\", function UsuariosPrincipalComponent_Template_app_listado_usuarios_eliminar_11_listener($event) {\n            return ctx.eliminarUsuarioDeHijo($event);\n          })(\"editar\", function UsuariosPrincipalComponent_Template_app_listado_usuarios_editar_11_listener($event) {\n            return ctx.editarUsuarioDeHijo($event);\n          });\n          i0.…µ…µelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.…µ…µadvance(9);\n          i0.…µ…µproperty(\"usuarioAEditar\", ctx.usuarioAEditar());\n          i0.…µ…µadvance(2);\n          i0.…µ…µproperty(\"usuarios\", ctx.listadoUsuarios());\n        }\n      },\n      dependencies: [i2.RouterLink, i3.ListadoUsuariosComponent, i4.FormularioUsuarioComponent],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["signal","UsuariosPrincipalComponent","constructor","usuariosService","listadoUsuarios","usuarioAEditar","nuevoUsuarioVacio","ngOnInit","leerUsuarios","nombre","username","password","rol","imagen","recibirUsuarioDeHijo","usuario","actualizarUsuario","set","editarUsuarioDeHijo","eliminarUsuarioDeHijo","id","confirm","eliminarUsuario","limpiarFormulario","i0","…µ…µdirectiveInject","i1","UsuariosService","selectors","decls","vars","consts","template","UsuariosPrincipalComponent_Template","rf","ctx","…µ…µelementStart","…µ…µtext","…µ…µelementEnd","…µ…µelement","…µ…µlistener","UsuariosPrincipalComponent_Template_app_formulario_usuario_enviarUsuario_9_listener","$event","UsuariosPrincipalComponent_Template_app_listado_usuarios_eliminar_11_listener","UsuariosPrincipalComponent_Template_app_listado_usuarios_editar_11_listener","…µ…µadvance","…µ…µproperty"],"sources":["/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/ejercicios/usuarios/usuarios-principal/usuarios-principal.component.ts","/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/ejercicios/usuarios/usuarios-principal/usuarios-principal.component.html"],"sourcesContent":["import { Component, OnInit, signal } from '@angular/core';\nimport { UsuariosService } from 'src/app/servicios/usuarios.service';\n\n@Component({\n  selector: 'app-usuarios-principal',\n  templateUrl: './usuarios-principal.component.html'\n})\nexport class UsuariosPrincipalComponent implements OnInit {\n  // Usamos el signal del servicio para que la tabla sea reactiva\n  public listadoUsuarios = this.usuariosService.listadoUsuarios;\n\n  // Signal que controla qu√© usuario se muestra en el formulario (hijo)\n  // Lo inicializamos con un objeto vac√≠o para que el formulario permita \"Crear\" al cargar\n  public usuarioAEditar = signal<any>(this.nuevoUsuarioVacio());\n\n  constructor(private usuariosService: UsuariosService) {}\n\n  ngOnInit() {\n    this.usuariosService.leerUsuarios();\n  }\n\n  // Funci√≥n auxiliar para resetear el formulario a modo \"Crear\"\n  private nuevoUsuarioVacio() {\n    return {\n      nombre: '',\n      username: '',\n      password: '', // Importante para la creaci√≥n\n      rol: 'usuario',\n      imagen: ''\n    };\n  }\n\n  // Se ejecuta cuando el formulario hijo emite el evento de \"Guardar\" o \"Actualizar\"\n  recibirUsuarioDeHijo(usuario: any) {\n    this.usuariosService.actualizarUsuario(usuario);\n    // IMPORTANTE: Despu√©s de enviar, reseteamos a un objeto vac√≠o \n    // para que el formulario quede listo para crear otro\n    this.usuarioAEditar.set(this.nuevoUsuarioVacio());\n  }\n\n  // Se ejecuta al pulsar \"Editar\" en la tabla\n  editarUsuarioDeHijo(usuario: any) {\n    // Pasamos una copia del usuario con su ID para que el servidor haga UPDATE\n    this.usuarioAEditar.set({ ...usuario });\n  }\n\n  eliminarUsuarioDeHijo(id: number) {\n    if (confirm('¬øEst√°s seguro de que quieres eliminar este usuario?')) {\n      this.usuariosService.eliminarUsuario(id);\n    }\n  }\n\n  // Nueva funci√≥n opcional por si quieres un bot√≥n de \"Cancelar edici√≥n\" o \"Limpiar\"\n  limpiarFormulario() {\n    this.usuarioAEditar.set(this.nuevoUsuarioVacio());\n  }\n}","<div class=\"container-fluid py-3 px-4\">\n    <h4>üõ°Ô∏è Gesti√≥n de Usuarios (Admin)</h4>\n    <button class=\"btn btn-outline-secondary btn-sm\" routerLink=\"/inicio\">\n            <i class=\"bi bi-arrow-left\"></i> Volver al Inicio\n        </button>\n    <hr>\n    <div class=\"row\">\n        <div class=\"col-md-4\">\n            <app-formulario-usuario \n              [usuarioAEditar]=\"usuarioAEditar()\" \n              (enviarUsuario)=\"recibirUsuarioDeHijo($event)\">\n            </app-formulario-usuario>\n        </div>\n        <div class=\"col-md-8\">\n            <app-listado-usuarios \n              [usuarios]=\"listadoUsuarios()\" \n              (eliminar)=\"eliminarUsuarioDeHijo($event)\"\n              (editar)=\"editarUsuarioDeHijo($event)\">\n            </app-listado-usuarios>\n        </div>\n    </div>\n</div>"],"mappings":"AAAA,SAA4BA,MAAM,QAAQ,eAAe;;;;;;AAOzD,OAAM,MAAOC,0BAA0B;EAQrCC,YAAoBC,eAAgC;IAAhC,KAAAA,eAAe,GAAfA,eAAe;IAPnC;IACO,KAAAC,eAAe,GAAG,IAAI,CAACD,eAAe,CAACC,eAAe;IAE7D;IACA;IACO,KAAAC,cAAc,GAAGL,MAAM,CAAM,IAAI,CAACM,iBAAiB,EAAE,CAAC;EAEN;EAEvDC,QAAQA,CAAA;IACN,IAAI,CAACJ,eAAe,CAACK,YAAY,EAAE;EACrC;EAEA;EACQF,iBAAiBA,CAAA;IACvB,OAAO;MACLG,MAAM,EAAE,EAAE;MACVC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,GAAG,EAAE,SAAS;MACdC,MAAM,EAAE;KACT;EACH;EAEA;EACAC,oBAAoBA,CAACC,OAAY;IAC/B,IAAI,CAACZ,eAAe,CAACa,iBAAiB,CAACD,OAAO,CAAC;IAC/C;IACA;IACA,IAAI,CAACV,cAAc,CAACY,GAAG,CAAC,IAAI,CAACX,iBAAiB,EAAE,CAAC;EACnD;EAEA;EACAY,mBAAmBA,CAACH,OAAY;IAC9B;IACA,IAAI,CAACV,cAAc,CAACY,GAAG,CAAC;MAAE,GAAGF;IAAO,CAAE,CAAC;EACzC;EAEAI,qBAAqBA,CAACC,EAAU;IAC9B,IAAIC,OAAO,CAAC,qDAAqD,CAAC,EAAE;MAClE,IAAI,CAAClB,eAAe,CAACmB,eAAe,CAACF,EAAE,CAAC;;EAE5C;EAEA;EACAG,iBAAiBA,CAAA;IACf,IAAI,CAAClB,cAAc,CAACY,GAAG,CAAC,IAAI,CAACX,iBAAiB,EAAE,CAAC;EACnD;;;uBAhDWL,0BAA0B,EAAAuB,EAAA,CAAAC,iBAAA,CAAAC,EAAA,CAAAC,eAAA;IAAA;EAAA;;;YAA1B1B,0BAA0B;MAAA2B,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,oCAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UCPvCV,EAAA,CAAAY,cAAA,aAAuC;UAC/BZ,EAAA,CAAAa,MAAA,0DAA+B;UAAAb,EAAA,CAAAc,YAAA,EAAK;UACxCd,EAAA,CAAAY,cAAA,gBAAsE;UAC9DZ,EAAA,CAAAe,SAAA,WAAgC;UAACf,EAAA,CAAAa,MAAA,yBACrC;UAAAb,EAAA,CAAAc,YAAA,EAAS;UACbd,EAAA,CAAAe,SAAA,SAAI;UACJf,EAAA,CAAAY,cAAA,aAAiB;UAIPZ,EAAA,CAAAgB,UAAA,2BAAAC,oFAAAC,MAAA;YAAA,OAAiBP,GAAA,CAAArB,oBAAA,CAAA4B,MAAA,CAA4B;UAAA,EAAC;UAChDlB,EAAA,CAAAc,YAAA,EAAyB;UAE7Bd,EAAA,CAAAY,cAAA,cAAsB;UAGhBZ,EAAA,CAAAgB,UAAA,sBAAAG,8EAAAD,MAAA;YAAA,OAAYP,GAAA,CAAAhB,qBAAA,CAAAuB,MAAA,CAA6B;UAAA,EAAC,oBAAAE,4EAAAF,MAAA;YAAA,OAChCP,GAAA,CAAAjB,mBAAA,CAAAwB,MAAA,CAA2B;UAAA,EADK;UAE5ClB,EAAA,CAAAc,YAAA,EAAuB;;;UATrBd,EAAA,CAAAqB,SAAA,GAAmC;UAAnCrB,EAAA,CAAAsB,UAAA,mBAAAX,GAAA,CAAA9B,cAAA,GAAmC;UAMnCmB,EAAA,CAAAqB,SAAA,GAA8B;UAA9BrB,EAAA,CAAAsB,UAAA,aAAAX,GAAA,CAAA/B,eAAA,GAA8B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}