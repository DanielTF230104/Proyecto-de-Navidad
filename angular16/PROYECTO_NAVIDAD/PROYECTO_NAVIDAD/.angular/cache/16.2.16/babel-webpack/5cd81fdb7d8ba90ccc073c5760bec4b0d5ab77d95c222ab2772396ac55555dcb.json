{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class PersisteApiLocalService {\n  constructor(http) {\n    this.http = http;\n    this.baseUrl = 'http://localhost:3000/dbzDB/mispersonajes';\n  }\n  verificarYCrearTabla() {\n    const url = `${this.baseUrl}/crear-tabla`;\n    return this.http.get(url);\n  }\n  leerMisPersonajes() {\n    const url = `${this.baseUrl}/leer`;\n    return this.http.get(url);\n  }\n  // Función para generar un ID único basado en el nombre del personaje\n  generarIdUnico(nombre) {\n    let hash = 0;\n    if (nombre.length === 0) return hash.toString();\n    for (let i = 0; i < nombre.length; i++) {\n      const char = nombre.charCodeAt(i);\n      hash = (hash << 5) - hash + char; // Bitwise operation\n      hash |= 0; // Convert to 32-bit integer\n    }\n\n    return hash.toString(); // Devolvemos el ID como string\n  }\n\n  grabarMiPersonaje(personaje) {\n    // Generamos un ID único para el personaje antes de guardarlo\n    const idUnico = this.generarIdUnico(personaje.name);\n    // Convertir el ID único a número\n    personaje.id = parseInt(idUnico, 10); // Convertimos el ID único generado a un número\n    const url = `${this.baseUrl}/grabar`;\n    return this.http.post(url, personaje);\n  }\n  borrarMiPersonaje(id) {\n    const url = `${this.baseUrl}/borrar/${id}`;\n    return this.http.delete(url);\n  }\n  static {\n    this.ɵfac = function PersisteApiLocalService_Factory(t) {\n      return new (t || PersisteApiLocalService)(i0.ɵɵinject(i1.HttpClient));\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: PersisteApiLocalService,\n      factory: PersisteApiLocalService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["PersisteApiLocalService","constructor","http","baseUrl","verificarYCrearTabla","url","get","leerMisPersonajes","generarIdUnico","nombre","hash","length","toString","i","char","charCodeAt","grabarMiPersonaje","personaje","idUnico","name","id","parseInt","post","borrarMiPersonaje","delete","i0","ɵɵinject","i1","HttpClient","factory","ɵfac","providedIn"],"sources":["/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/ejercicios/ejercicio01/servicios/persiste-api-local.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { MiPersonaje } from '../cruds/MisPersonajes/interfaces/miPersonaje';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class PersisteApiLocalService {\n  private baseUrl: string = 'http://localhost:3000/dbzDB/mispersonajes';\n\n  constructor(private http: HttpClient) { }\n\n  verificarYCrearTabla(): Observable<any> {\n    const url = `${this.baseUrl}/crear-tabla`;\n    return this.http.get(url);\n  }\n\n  leerMisPersonajes(): Observable<MiPersonaje[]> {\n    const url = `${this.baseUrl}/leer`;\n    return this.http.get<MiPersonaje[]>(url);\n  }\n\n  // Función para generar un ID único basado en el nombre del personaje\n  generarIdUnico(nombre: string): string {\n    let hash = 0;\n    if (nombre.length === 0) return hash.toString();\n    for (let i = 0; i < nombre.length; i++) {\n      const char = nombre.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char; // Bitwise operation\n      hash |= 0; // Convert to 32-bit integer\n    }\n    return hash.toString(); // Devolvemos el ID como string\n  }\n\n  grabarMiPersonaje(personaje: MiPersonaje): Observable<any> {\n    // Generamos un ID único para el personaje antes de guardarlo\n    const idUnico = this.generarIdUnico(personaje.name);\n    \n    // Convertir el ID único a número\n    personaje.id = parseInt(idUnico, 10); // Convertimos el ID único generado a un número\n\n    const url = `${this.baseUrl}/grabar`;\n    return this.http.post(url, personaje);\n  }\n\n  borrarMiPersonaje(id: number): Observable<any> {\n    const url = `${this.baseUrl}/borrar/${id}`;\n    return this.http.delete(url);\n  }\n}\n"],"mappings":";;AAQA,OAAM,MAAOA,uBAAuB;EAGlCC,YAAoBC,IAAgB;IAAhB,KAAAA,IAAI,GAAJA,IAAI;IAFhB,KAAAC,OAAO,GAAW,2CAA2C;EAE7B;EAExCC,oBAAoBA,CAAA;IAClB,MAAMC,GAAG,GAAG,GAAG,IAAI,CAACF,OAAO,cAAc;IACzC,OAAO,IAAI,CAACD,IAAI,CAACI,GAAG,CAACD,GAAG,CAAC;EAC3B;EAEAE,iBAAiBA,CAAA;IACf,MAAMF,GAAG,GAAG,GAAG,IAAI,CAACF,OAAO,OAAO;IAClC,OAAO,IAAI,CAACD,IAAI,CAACI,GAAG,CAAgBD,GAAG,CAAC;EAC1C;EAEA;EACAG,cAAcA,CAACC,MAAc;IAC3B,IAAIC,IAAI,GAAG,CAAC;IACZ,IAAID,MAAM,CAACE,MAAM,KAAK,CAAC,EAAE,OAAOD,IAAI,CAACE,QAAQ,EAAE;IAC/C,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGJ,MAAM,CAACE,MAAM,EAAEE,CAAC,EAAE,EAAE;MACtC,MAAMC,IAAI,GAAGL,MAAM,CAACM,UAAU,CAACF,CAAC,CAAC;MACjCH,IAAI,GAAI,CAACA,IAAI,IAAI,CAAC,IAAIA,IAAI,GAAII,IAAI,CAAC,CAAC;MACpCJ,IAAI,IAAI,CAAC,CAAC,CAAC;;;IAEb,OAAOA,IAAI,CAACE,QAAQ,EAAE,CAAC,CAAC;EAC1B;;EAEAI,iBAAiBA,CAACC,SAAsB;IACtC;IACA,MAAMC,OAAO,GAAG,IAAI,CAACV,cAAc,CAACS,SAAS,CAACE,IAAI,CAAC;IAEnD;IACAF,SAAS,CAACG,EAAE,GAAGC,QAAQ,CAACH,OAAO,EAAE,EAAE,CAAC,CAAC,CAAC;IAEtC,MAAMb,GAAG,GAAG,GAAG,IAAI,CAACF,OAAO,SAAS;IACpC,OAAO,IAAI,CAACD,IAAI,CAACoB,IAAI,CAACjB,GAAG,EAAEY,SAAS,CAAC;EACvC;EAEAM,iBAAiBA,CAACH,EAAU;IAC1B,MAAMf,GAAG,GAAG,GAAG,IAAI,CAACF,OAAO,WAAWiB,EAAE,EAAE;IAC1C,OAAO,IAAI,CAAClB,IAAI,CAACsB,MAAM,CAACnB,GAAG,CAAC;EAC9B;;;uBAzCWL,uBAAuB,EAAAyB,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;IAAA;EAAA;;;aAAvB5B,uBAAuB;MAAA6B,OAAA,EAAvB7B,uBAAuB,CAAA8B,IAAA;MAAAC,UAAA,EAFtB;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}