{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/servicios/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction RegistroComponent_div_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 16)(1, \"p\");\n    i0.ɵɵtext(2, \"Vista previa:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"img\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r0.imagenBase64, i0.ɵɵsanitizeUrl);\n  }\n}\nexport class RegistroComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.nombre = '';\n    this.username = '';\n    this.password = '';\n    this.imagenBase64 = ''; // Nueva propiedad para la imagen\n    this.rol = 'usuario';\n  }\n  // Función para capturar el archivo y convertirlo\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        // e.target.result contiene la cadena Base64\n        this.imagenBase64 = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n  // 2. Actualiza la llamada al método registro\n  registrar() {\n    this.authService.registro(this.nombre, this.username, this.password, this.imagenBase64, this.rol // Ahora enviamos el rol elegido en el HTML\n    );\n\n    this.router.navigate(['/login']);\n  }\n  static {\n    this.ɵfac = function RegistroComponent_Factory(t) {\n      return new (t || RegistroComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: RegistroComponent,\n      selectors: [[\"app-registro\"]],\n      decls: 32,\n      vars: 6,\n      consts: [[1, \"container-fluid\", \"py-3\", \"px-4\"], [1, \"row\"], [1, \"col-md-4\", \"mb-3\"], [1, \"form-label\"], [\"type\", \"text\", \"placeholder\", \"Ej: Juan P\\u00E9rez\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"Usuario\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"placeholder\", \"Contrase\\u00F1a\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [1, \"form-group\", \"mb-3\"], [\"name\", \"rol\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"usuario\"], [\"value\", \"administrador\"], [1, \"col-md-6\", \"mb-3\"], [\"type\", \"file\", \"accept\", \"image/*\", 1, \"form-control\", 3, \"change\"], [\"class\", \"col-md-6 mb-3 text-center\", 4, \"ngIf\"], [1, \"col-12\", \"mt-2\"], [\"type\", \"button\", 1, \"btn\", \"btn-success\", 3, \"disabled\", \"click\"], [1, \"col-md-6\", \"mb-3\", \"text-center\"], [1, \"rounded-circle\", \"shadow\", 2, \"width\", \"80px\", \"height\", \"80px\", \"object-fit\", \"cover\", 3, \"src\"]],\n      template: function RegistroComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h5\");\n          i0.ɵɵtext(2, \"Registro de Nuevo Usuario\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"label\", 3);\n          i0.ɵɵtext(6, \"Nombre Completo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(7, \"input\", 4);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroComponent_Template_input_ngModelChange_7_listener($event) {\n            return ctx.nombre = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(8, \"div\", 2)(9, \"label\", 3);\n          i0.ɵɵtext(10, \"Nombre de Usuario\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(11, \"input\", 5);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroComponent_Template_input_ngModelChange_11_listener($event) {\n            return ctx.username = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(12, \"div\", 2)(13, \"label\", 3);\n          i0.ɵɵtext(14, \"Contrase\\u00F1a\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"input\", 6);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroComponent_Template_input_ngModelChange_15_listener($event) {\n            return ctx.password = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(16, \"div\", 7)(17, \"label\");\n          i0.ɵɵtext(18, \"Rol de usuario:\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"select\", 8);\n          i0.ɵɵlistener(\"ngModelChange\", function RegistroComponent_Template_select_ngModelChange_19_listener($event) {\n            return ctx.rol = $event;\n          });\n          i0.ɵɵelementStart(20, \"option\", 9);\n          i0.ɵɵtext(21, \"usuario\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(22, \"option\", 10);\n          i0.ɵɵtext(23, \"administrador\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(24, \"div\", 11)(25, \"label\", 3);\n          i0.ɵɵtext(26, \"Foto de Perfil\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(27, \"input\", 12);\n          i0.ɵɵlistener(\"change\", function RegistroComponent_Template_input_change_27_listener($event) {\n            return ctx.onFileSelected($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(28, RegistroComponent_div_28_Template, 4, 1, \"div\", 13);\n          i0.ɵɵelementStart(29, \"div\", 14)(30, \"button\", 15);\n          i0.ɵɵlistener(\"click\", function RegistroComponent_Template_button_click_30_listener() {\n            return ctx.registrar();\n          });\n          i0.ɵɵtext(31, \" Registrarse \");\n          i0.ɵɵelementEnd()()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"ngModel\", ctx.nombre);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.username);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.password);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.rol);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"ngIf\", ctx.imagenBase64);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"disabled\", !ctx.nombre || !ctx.username || !ctx.password);\n        }\n      },\n      dependencies: [i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n      styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵproperty","ctx_r0","imagenBase64","ɵɵsanitizeUrl","RegistroComponent","constructor","authService","router","nombre","username","password","rol","onFileSelected","event","file","target","files","reader","FileReader","onload","e","result","readAsDataURL","registrar","registro","navigate","ɵɵdirectiveInject","i1","AuthService","i2","Router","selectors","decls","vars","consts","template","RegistroComponent_Template","rf","ctx","ɵɵlistener","RegistroComponent_Template_input_ngModelChange_7_listener","$event","RegistroComponent_Template_input_ngModelChange_11_listener","RegistroComponent_Template_input_ngModelChange_15_listener","RegistroComponent_Template_select_ngModelChange_19_listener","RegistroComponent_Template_input_change_27_listener","ɵɵtemplate","RegistroComponent_div_28_Template","RegistroComponent_Template_button_click_30_listener"],"sources":["/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/auth/registro/registro.component.ts","/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/auth/registro/registro.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthService } from 'src/app/servicios/auth.service';\n\n@Component({\n  selector: 'app-registro',\n  templateUrl: './registro.component.html',\n  styleUrls: ['./registro.component.css']\n})\nexport class RegistroComponent {\n  nombre: string = '';\n  username: string = '';\n  password: string = '';\n  imagenBase64: string = ''; // Nueva propiedad para la imagen\n\n  constructor(private authService: AuthService,     \n              private router: Router) \n  { }\n\n  // Función para capturar el archivo y convertirlo\n  onFileSelected(event: any) {\n    const file: File = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e: any) => {\n        // e.target.result contiene la cadena Base64\n        this.imagenBase64 = e.target.result;\n      };\n      reader.readAsDataURL(file);\n    }\n  }\n\n  rol: string = 'usuario';\n\n// 2. Actualiza la llamada al método registro\n  registrar() {\n    this.authService.registro(\n      this.nombre, \n      this.username, \n      this.password, \n      this.imagenBase64,\n      this.rol // Ahora enviamos el rol elegido en el HTML\n    );\n    this.router.navigate(['/login']);\n\n  }\n}","<div class=\"container-fluid py-3 px-4\">\n    <h5>Registro de Nuevo Usuario</h5>\n    <div class=\"row\">\n        <div class=\"col-md-4 mb-3\">\n            <label class=\"form-label\">Nombre Completo</label>\n            <input type=\"text\" [(ngModel)]=\"nombre\" class=\"form-control\" placeholder=\"Ej: Juan Pérez\">\n        </div>\n        <div class=\"col-md-4 mb-3\">\n            <label class=\"form-label\">Nombre de Usuario</label>\n            <input type=\"text\" [(ngModel)]=\"username\" class=\"form-control\" placeholder=\"Usuario\">\n        </div>\n        <div class=\"col-md-4 mb-3\">\n            <label class=\"form-label\">Contraseña</label>\n            <input type=\"password\" [(ngModel)]=\"password\" class=\"form-control\" placeholder=\"Contraseña\">\n        </div>\n\n        <div class=\"form-group mb-3\">\n            <label>Rol de usuario:</label>\n            <select [(ngModel)]=\"rol\" name=\"rol\" class=\"form-control\">\n                <option value=\"usuario\">usuario</option>\n                <option value=\"administrador\">administrador</option>\n            </select>\n        </div>\n\n        <div class=\"col-md-6 mb-3\">\n            <label class=\"form-label\">Foto de Perfil</label>\n            <input type=\"file\" (change)=\"onFileSelected($event)\" class=\"form-control\" accept=\"image/*\">\n        </div>\n        \n        <div class=\"col-md-6 mb-3 text-center\" *ngIf=\"imagenBase64\">\n            <p>Vista previa:</p>\n            <img [src]=\"imagenBase64\" class=\"rounded-circle shadow\" style=\"width: 80px; height: 80px; object-fit: cover;\">\n        </div>\n\n        <div class=\"col-12 mt-2\">\n            <button type=\"button\" class=\"btn btn-success\" (click)=\"registrar()\" [disabled]=\"!nombre || !username || !password\">\n                Registrarse\n            </button>\n        </div>\n    </div>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}