{"ast":null,"code":"import { signal, inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport * as i0 from \"@angular/core\";\nexport class AuthService {\n  constructor() {\n    // 1. Necesitas declarar la URL\n    this.url = 'http://localhost:3000';\n    // 2. Necesitas inyectar HttpClient y Router\n    this.http = inject(HttpClient);\n    this.router = inject(Router);\n    this.usuario = signal(null);\n    this.isLoggedIn = signal(false);\n  }\n  // 3. Ajustamos el método login para que reciba un objeto\n  login(datos) {\n    return this.http.get(`${this.url}/accesoDB`).subscribe({\n      next: usuarios => {\n        const user = usuarios.find(u => u.username === datos.username && u.password === datos.password);\n        if (user) {\n          this.usuario.set(user);\n          this.isLoggedIn.set(true);\n          this.router.navigate(['/inicio']);\n        } else {\n          alert(\"Usuario o contraseña incorrectos\");\n        }\n      },\n      error: e => console.error(\"Error en el servidor\", e)\n    });\n  }\n  static {\n    this.ɵfac = function AuthService_Factory(t) {\n      return new (t || AuthService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: AuthService,\n      factory: AuthService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["signal","inject","HttpClient","Router","AuthService","constructor","url","http","router","usuario","isLoggedIn","login","datos","get","subscribe","next","usuarios","user","find","u","username","password","set","navigate","alert","error","e","console","factory","ɵfac","providedIn"],"sources":["/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/servicios/auth.service.ts"],"sourcesContent":["import { Injectable, signal, inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AuthService {\n  // 1. Necesitas declarar la URL\n  private url: string = 'http://localhost:3000'; \n  \n  // 2. Necesitas inyectar HttpClient y Router\n  private http = inject(HttpClient);\n  private router = inject(Router);\n\n  public usuario = signal<any>(null);\n  public isLoggedIn = signal<boolean>(false);\n\n  // 3. Ajustamos el método login para que reciba un objeto\n  login(datos: any) {\n    return this.http.get<any[]>(`${this.url}/accesoDB`).subscribe({\n      next: (usuarios: any[]) => {\n        const user = usuarios.find(u => u.username === datos.username && u.password === datos.password);\n        if (user) {\n          this.usuario.set(user);\n          this.isLoggedIn.set(true);\n          this.router.navigate(['/inicio']);\n        } else {\n          alert(\"Usuario o contraseña incorrectos\");\n        }\n      },\n      error: (e) => console.error(\"Error en el servidor\", e)\n    });\n  }\n}"],"mappings":"AAAA,SAAqBA,MAAM,EAAEC,MAAM,QAAQ,eAAe;AAC1D,SAASC,UAAU,QAAQ,sBAAsB;AACjD,SAASC,MAAM,QAAQ,iBAAiB;;AAKxC,OAAM,MAAOC,WAAW;EAHxBC,YAAA;IAIE;IACQ,KAAAC,GAAG,GAAW,uBAAuB;IAE7C;IACQ,KAAAC,IAAI,GAAGN,MAAM,CAACC,UAAU,CAAC;IACzB,KAAAM,MAAM,GAAGP,MAAM,CAACE,MAAM,CAAC;IAExB,KAAAM,OAAO,GAAGT,MAAM,CAAM,IAAI,CAAC;IAC3B,KAAAU,UAAU,GAAGV,MAAM,CAAU,KAAK,CAAC;;EAE1C;EACAW,KAAKA,CAACC,KAAU;IACd,OAAO,IAAI,CAACL,IAAI,CAACM,GAAG,CAAQ,GAAG,IAAI,CAACP,GAAG,WAAW,CAAC,CAACQ,SAAS,CAAC;MAC5DC,IAAI,EAAGC,QAAe,IAAI;QACxB,MAAMC,IAAI,GAAGD,QAAQ,CAACE,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,QAAQ,KAAKR,KAAK,CAACQ,QAAQ,IAAID,CAAC,CAACE,QAAQ,KAAKT,KAAK,CAACS,QAAQ,CAAC;QAC/F,IAAIJ,IAAI,EAAE;UACR,IAAI,CAACR,OAAO,CAACa,GAAG,CAACL,IAAI,CAAC;UACtB,IAAI,CAACP,UAAU,CAACY,GAAG,CAAC,IAAI,CAAC;UACzB,IAAI,CAACd,MAAM,CAACe,QAAQ,CAAC,CAAC,SAAS,CAAC,CAAC;SAClC,MAAM;UACLC,KAAK,CAAC,kCAAkC,CAAC;;MAE7C,CAAC;MACDC,KAAK,EAAGC,CAAC,IAAKC,OAAO,CAACF,KAAK,CAAC,sBAAsB,EAAEC,CAAC;KACtD,CAAC;EACJ;;;uBA1BWtB,WAAW;IAAA;EAAA;;;aAAXA,WAAW;MAAAwB,OAAA,EAAXxB,WAAW,CAAAyB,IAAA;MAAAC,UAAA,EAFV;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}