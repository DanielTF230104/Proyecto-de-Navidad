{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/forms\";\nfunction FormularioUsuarioComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 1)(1, \"label\");\n    i0.ɵɵtext(2, \"Contrase\\u00F1a\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function FormularioUsuarioComponent_div_11_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.usuario.password = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.usuario.password);\n  }\n}\nexport class FormularioUsuarioComponent {\n  constructor() {\n    this.enviarUsuario = new EventEmitter();\n    // Inicializamos con todos los campos necesarios para la base de datos\n    this.usuario = {\n      nombre: '',\n      username: '',\n      password: '',\n      rol: 'usuario',\n      imagen: ''\n    };\n  }\n  ngOnChanges(changes) {\n    // Si cambia la entrada del padre, actualizamos el formulario local\n    if (this.usuarioAEditar) {\n      this.usuario = {\n        ...this.usuarioAEditar\n      };\n    }\n  }\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = e => this.usuario.imagen = e.target.result;\n      reader.readAsDataURL(file);\n    }\n  }\n  guardar() {\n    this.enviarUsuario.emit({\n      ...this.usuario\n    });\n    // Limpieza completa después de emitir\n    this.usuario = {\n      nombre: '',\n      username: '',\n      password: '',\n      rol: 'usuario',\n      imagen: ''\n    };\n  }\n  static {\n    this.ɵfac = function FormularioUsuarioComponent_Factory(t) {\n      return new (t || FormularioUsuarioComponent)();\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FormularioUsuarioComponent,\n      selectors: [[\"app-formulario-usuario\"]],\n      inputs: {\n        usuarioAEditar: \"usuarioAEditar\"\n      },\n      outputs: {\n        enviarUsuario: \"enviarUsuario\"\n      },\n      features: [i0.ɵɵNgOnChangesFeature],\n      decls: 26,\n      vars: 7,\n      consts: [[1, \"card\", \"p-3\", \"shadow-sm\"], [1, \"mb-3\"], [\"type\", \"text\", \"placeholder\", \"Ej: Juan P\\u00E9rez\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"text\", \"placeholder\", \"Ej: juan88\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"class\", \"mb-3\", 4, \"ngIf\"], [1, \"form-select\", 3, \"ngModel\", \"ngModelChange\"], [\"value\", \"usuario\"], [\"value\", \"administrador\"], [\"type\", \"file\", \"accept\", \"image/*\", 1, \"form-control\", 3, \"change\"], [1, \"btn\", \"btn-primary\", \"w-100\", 3, \"disabled\", \"click\"], [\"type\", \"password\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"]],\n      template: function FormularioUsuarioComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h5\");\n          i0.ɵɵtext(2);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"div\", 1)(4, \"label\");\n          i0.ɵɵtext(5, \"Nombre Completo\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(6, \"input\", 2);\n          i0.ɵɵlistener(\"ngModelChange\", function FormularioUsuarioComponent_Template_input_ngModelChange_6_listener($event) {\n            return ctx.usuario.nombre = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"div\", 1)(8, \"label\");\n          i0.ɵɵtext(9, \"Nombre de Usuario (@)\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(10, \"input\", 3);\n          i0.ɵɵlistener(\"ngModelChange\", function FormularioUsuarioComponent_Template_input_ngModelChange_10_listener($event) {\n            return ctx.usuario.username = $event;\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(11, FormularioUsuarioComponent_div_11_Template, 4, 1, \"div\", 4);\n          i0.ɵɵelementStart(12, \"div\", 1)(13, \"label\");\n          i0.ɵɵtext(14, \"Rol\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(15, \"select\", 5);\n          i0.ɵɵlistener(\"ngModelChange\", function FormularioUsuarioComponent_Template_select_ngModelChange_15_listener($event) {\n            return ctx.usuario.rol = $event;\n          });\n          i0.ɵɵelementStart(16, \"option\", 6);\n          i0.ɵɵtext(17, \"Usuario\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(18, \"option\", 7);\n          i0.ɵɵtext(19, \"Administrador\");\n          i0.ɵɵelementEnd()()();\n          i0.ɵɵelementStart(20, \"div\", 1)(21, \"label\");\n          i0.ɵɵtext(22, \"Foto de Perfil\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(23, \"input\", 8);\n          i0.ɵɵlistener(\"change\", function FormularioUsuarioComponent_Template_input_change_23_listener($event) {\n            return ctx.onFileSelected($event);\n          });\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(24, \"button\", 9);\n          i0.ɵɵlistener(\"click\", function FormularioUsuarioComponent_Template_button_click_24_listener() {\n            return ctx.guardar();\n          });\n          i0.ɵɵtext(25);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(2);\n          i0.ɵɵtextInterpolate(ctx.usuario.id ? \"Editar Usuario\" : \"Nuevo Usuario\");\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.usuario.nombre);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.usuario.username);\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngIf\", !ctx.usuario.id);\n          i0.ɵɵadvance(4);\n          i0.ɵɵproperty(\"ngModel\", ctx.usuario.rol);\n          i0.ɵɵadvance(9);\n          i0.ɵɵproperty(\"disabled\", !ctx.usuario.nombre || !ctx.usuario.username);\n          i0.ɵɵadvance(1);\n          i0.ɵɵtextInterpolate1(\" \", ctx.usuario.id ? \"Actualizar\" : \"Crear\", \" \");\n        }\n      },\n      dependencies: [i1.NgIf, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgModel],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["EventEmitter","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","FormularioUsuarioComponent_div_11_Template_input_ngModelChange_3_listener","$event","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","usuario","password","ɵɵadvance","ɵɵproperty","ctx_r0","FormularioUsuarioComponent","constructor","enviarUsuario","nombre","username","rol","imagen","ngOnChanges","changes","usuarioAEditar","onFileSelected","event","file","target","files","reader","FileReader","onload","e","result","readAsDataURL","guardar","emit","selectors","inputs","outputs","features","ɵɵNgOnChangesFeature","decls","vars","consts","template","FormularioUsuarioComponent_Template","rf","ctx","FormularioUsuarioComponent_Template_input_ngModelChange_6_listener","FormularioUsuarioComponent_Template_input_ngModelChange_10_listener","ɵɵtemplate","FormularioUsuarioComponent_div_11_Template","FormularioUsuarioComponent_Template_select_ngModelChange_15_listener","FormularioUsuarioComponent_Template_input_change_23_listener","FormularioUsuarioComponent_Template_button_click_24_listener","ɵɵtextInterpolate","id","ɵɵtextInterpolate1"],"sources":["/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/ejercicios/usuarios/formulario-usuario/formulario-usuario.component.ts","/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/ejercicios/usuarios/formulario-usuario/formulario-usuario.component.html"],"sourcesContent":["import { Component, EventEmitter, Input, Output, OnChanges, SimpleChanges } from '@angular/core';\n\n@Component({\n  selector: 'app-formulario-usuario',\n  templateUrl: './formulario-usuario.component.html'\n})\nexport class FormularioUsuarioComponent implements OnChanges {\n  @Input() usuarioAEditar: any;\n  @Output() enviarUsuario = new EventEmitter<any>();\n\n  // Inicializamos con todos los campos necesarios para la base de datos\n  public usuario: any = { \n    nombre: '', \n    username: '', \n    password: '', \n    rol: 'usuario', \n    imagen: '' \n  };\n\n  ngOnChanges(changes: SimpleChanges) {\n    // Si cambia la entrada del padre, actualizamos el formulario local\n    if (this.usuarioAEditar) {\n      this.usuario = { ...this.usuarioAEditar };\n    }\n  }\n\n  onFileSelected(event: any) {\n    const file = event.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onload = (e: any) => this.usuario.imagen = e.target.result;\n      reader.readAsDataURL(file);\n    }\n  }\n\n  guardar() {\n    this.enviarUsuario.emit({ ...this.usuario });\n    // Limpieza completa después de emitir\n    this.usuario = { nombre: '', username: '', password: '', rol: 'usuario', imagen: '' };\n  }\n}","<div class=\"card p-3 shadow-sm\">\n    <h5>{{ usuario.id ? 'Editar Usuario' : 'Nuevo Usuario' }}</h5>\n    \n    <div class=\"mb-3\">\n        <label>Nombre Completo</label>\n        <input type=\"text\" [(ngModel)]=\"usuario.nombre\" class=\"form-control\" placeholder=\"Ej: Juan Pérez\">\n    </div>\n\n    <div class=\"mb-3\">\n        <label>Nombre de Usuario (@)</label>\n        <input type=\"text\" [(ngModel)]=\"usuario.username\" class=\"form-control\" placeholder=\"Ej: juan88\">\n    </div>\n\n    <div class=\"mb-3\" *ngIf=\"!usuario.id\">\n        <label>Contraseña</label>\n        <input type=\"password\" [(ngModel)]=\"usuario.password\" class=\"form-control\">\n    </div>\n\n    <div class=\"mb-3\">\n        <label>Rol</label>\n        <select [(ngModel)]=\"usuario.rol\" class=\"form-select\">\n            <option value=\"usuario\">Usuario</option>\n            <option value=\"administrador\">Administrador</option>\n        </select>\n    </div>\n\n    <div class=\"mb-3\">\n        <label>Foto de Perfil</label>\n        <input type=\"file\" (change)=\"onFileSelected($event)\" class=\"form-control\" accept=\"image/*\">\n    </div>\n\n    <button class=\"btn btn-primary w-100\" (click)=\"guardar()\" [disabled]=\"!usuario.nombre || !usuario.username\">\n        {{ usuario.id ? 'Actualizar' : 'Crear' }}\n    </button>\n</div>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}