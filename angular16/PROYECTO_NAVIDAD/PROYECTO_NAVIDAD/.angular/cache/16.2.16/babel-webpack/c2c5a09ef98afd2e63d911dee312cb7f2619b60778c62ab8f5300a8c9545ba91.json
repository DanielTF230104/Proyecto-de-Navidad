{"ast":null,"code":"import { signal, inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport * as i0 from \"@angular/core\";\nexport class UsuariosService {\n  constructor() {\n    this.http = inject(HttpClient);\n    this.baseUrl = 'http://localhost:3000/usuarios';\n    // Signal para que el componente se actualice automáticamente\n    this.listadoUsuarios = signal([]);\n    this.leerUsuarios(); // Carga inicial\n  }\n\n  leerUsuarios() {\n    // Cambiamos /leer por /lista para diferenciarlo del /login\n    this.http.get(`${this.baseUrl}/lista`).subscribe({\n      next: users => {\n        this.listadoUsuarios.set(users);\n      },\n      error: err => console.error('Error al leer usuarios:', err)\n    });\n  }\n  eliminarUsuario(id) {\n    // Asegúrate de que en el backend tengas una ruta router.delete(\"/borrar/:id\")\n    this.http.delete(`${this.baseUrl}/borrar/${id}`).subscribe({\n      next: () => this.leerUsuarios(),\n      error: err => console.error('Error al borrar:', err)\n    });\n  }\n  actualizarUsuario(usuario) {\n    // Usamos /grabar que es la ruta que ya tienes en server.js\n    this.http.post(`${this.baseUrl}/grabar`, usuario).subscribe({\n      next: () => this.leerUsuarios(),\n      error: err => console.error('Error al actualizar/grabar:', err)\n    });\n  }\n  static {\n    this.ɵfac = function UsuariosService_Factory(t) {\n      return new (t || UsuariosService)();\n    };\n  }\n  static {\n    this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n      token: UsuariosService,\n      factory: UsuariosService.ɵfac,\n      providedIn: 'root'\n    });\n  }\n}","map":{"version":3,"names":["signal","inject","HttpClient","UsuariosService","constructor","http","baseUrl","listadoUsuarios","leerUsuarios","get","subscribe","next","users","set","error","err","console","eliminarUsuario","id","delete","actualizarUsuario","usuario","post","factory","ɵfac","providedIn"],"sources":["/usr/src/app/PROYECTO_NAVIDAD/PROYECTO_NAVIDAD/src/app/servicios/usuarios.service.ts"],"sourcesContent":["import { Injectable, signal, inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UsuariosService {\n  private http = inject(HttpClient);\n  private baseUrl: string = 'http://localhost:3000/usuarios';\n  \n  // Signal para que el componente se actualice automáticamente\n  public listadoUsuarios = signal<any[]>([]);\n\n  constructor() {\n    this.leerUsuarios(); // Carga inicial\n  }\n\n  leerUsuarios() {\n    // Cambiamos /leer por /lista para diferenciarlo del /login\n    this.http.get<any[]>(`${this.baseUrl}/lista`).subscribe({\n      next: (users) => {\n        this.listadoUsuarios.set(users);\n      },\n      error: (err) => console.error('Error al leer usuarios:', err)\n    });\n  }\n\n  eliminarUsuario(id: number) {\n    // Asegúrate de que en el backend tengas una ruta router.delete(\"/borrar/:id\")\n    this.http.delete(`${this.baseUrl}/borrar/${id}`).subscribe({\n      next: () => this.leerUsuarios(),\n      error: (err) => console.error('Error al borrar:', err)\n    });\n  }\n\n  actualizarUsuario(usuario: any) {\n    // Usamos /grabar que es la ruta que ya tienes en server.js\n    this.http.post(`${this.baseUrl}/grabar`, usuario).subscribe({\n      next: () => this.leerUsuarios(),\n      error: (err) => console.error('Error al actualizar/grabar:', err)\n    });\n  }\n}"],"mappings":"AAAA,SAAqBA,MAAM,EAAEC,MAAM,QAAQ,eAAe;AAC1D,SAASC,UAAU,QAAQ,sBAAsB;;AAKjD,OAAM,MAAOC,eAAe;EAO1BC,YAAA;IANQ,KAAAC,IAAI,GAAGJ,MAAM,CAACC,UAAU,CAAC;IACzB,KAAAI,OAAO,GAAW,gCAAgC;IAE1D;IACO,KAAAC,eAAe,GAAGP,MAAM,CAAQ,EAAE,CAAC;IAGxC,IAAI,CAACQ,YAAY,EAAE,CAAC,CAAC;EACvB;;EAEAA,YAAYA,CAAA;IACV;IACA,IAAI,CAACH,IAAI,CAACI,GAAG,CAAQ,GAAG,IAAI,CAACH,OAAO,QAAQ,CAAC,CAACI,SAAS,CAAC;MACtDC,IAAI,EAAGC,KAAK,IAAI;QACd,IAAI,CAACL,eAAe,CAACM,GAAG,CAACD,KAAK,CAAC;MACjC,CAAC;MACDE,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,yBAAyB,EAAEC,GAAG;KAC7D,CAAC;EACJ;EAEAE,eAAeA,CAACC,EAAU;IACxB;IACA,IAAI,CAACb,IAAI,CAACc,MAAM,CAAC,GAAG,IAAI,CAACb,OAAO,WAAWY,EAAE,EAAE,CAAC,CAACR,SAAS,CAAC;MACzDC,IAAI,EAAEA,CAAA,KAAM,IAAI,CAACH,YAAY,EAAE;MAC/BM,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,kBAAkB,EAAEC,GAAG;KACtD,CAAC;EACJ;EAEAK,iBAAiBA,CAACC,OAAY;IAC5B;IACA,IAAI,CAAChB,IAAI,CAACiB,IAAI,CAAC,GAAG,IAAI,CAAChB,OAAO,SAAS,EAAEe,OAAO,CAAC,CAACX,SAAS,CAAC;MAC1DC,IAAI,EAAEA,CAAA,KAAM,IAAI,CAACH,YAAY,EAAE;MAC/BM,KAAK,EAAGC,GAAG,IAAKC,OAAO,CAACF,KAAK,CAAC,6BAA6B,EAAEC,GAAG;KACjE,CAAC;EACJ;;;uBAnCWZ,eAAe;IAAA;EAAA;;;aAAfA,eAAe;MAAAoB,OAAA,EAAfpB,eAAe,CAAAqB,IAAA;MAAAC,UAAA,EAFd;IAAM;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}